services:
  - docker

sudo: required

branches:
  only:
  - develop

script:
  - 'if [ "$DOCKER_USERNAME" != "" ]; then sudo docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD; fi'
  - sudo docker pull ubuntu:focal
  - sudo docker build -t rcldocker .
  - docker run -v $(pwd):/home/rclnodejsx/ -t --rm  rcldocker bash -i -c  'pwd && env && ls -l /home/rclnodejs && cd /home/rclnodejsx && ls -l && whoami && ./scripts/build.sh && npm test'
