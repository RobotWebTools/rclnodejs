# rclnodejs - ROS Client Library for JavaScript language

Branch | Linux Build | MacOS Build | Windows Build |
------------ | :-------------: |  :-------------: |  :-------------: |
develop | [![Build Status](https://travis-ci.org/RobotWebTools/rclnodejs.svg?branch=develop)](https://github.com/RobotWebTools/rclnodejs/tree/develop) | [![macOS Build Status](https://circleci.com/gh/RobotWebTools/rclnodejs/tree/develop.svg?style=shield)](https://circleci.com/gh/RobotWebTools/rclnodejs) | N/A
master | [![Build Status](https://travis-ci.org/RobotWebTools/rclnodejs.svg?branch=master)](https://github.com/RobotWebTools/rclnodejs/tree/master) | [![macOS Build Status](https://circleci.com/gh/RobotWebTools/rclnodejs/tree/master.svg?style=shield)](https://circleci.com/gh/RobotWebTools/rclnodejs) | N/A

## Build Environment

1.Building ROS 2.

Currently, the ROS is a cross-platform system, which covers Linux, MacOS and Windows, and the `rclnodejs` module is developed on the [`master`](https://github.com/ros2/ros2/blob/master/ros2.repos) branch of ROS, so you have to build ROS from scratch at the present stage. Please select the platform you want to work on, then reference the instruction to build ROS.

* [Linux](https://github.com/ros2/ros2/wiki/Linux-Development-Setup)
* [MacOS](https://github.com/ros2/ros2/wiki/OSX-Development-Setup)
* [Windows](https://github.com/ros2/ros2/wiki/Windows-Development-Setup)

2.Install `Node.js`.

The `Node.js` version we selected is the latest LTS (6.x) `Boron`. You can install it:

* Download from Node.js offical [website](https://nodejs.org/en/), and install it.
* Use the Node Version Manager ([nvm](https://github.com/creationix/nvm)) to install it.

## Build Module

This `Node.js` module is built by [node-gyp](https://www.npmjs.com/package/node-gyp), all you have to do is just to run the following command (**We only support the Linux platform in the current phase**):

```javascript
npm install
```

## Run Unit Test

[mocha](https://www.npmjs.com/package/mocha) is a javascript test framework for node.js, simply run the following command to run the unit test under `test` folder:

```javascript
npm run test
```

## How To Use

After building this module, you just need to follow the normal way to use it as a `Node.js` module.

```javascript
const rclnodejs = require('../index.js');
let String = rclnodejs.require('std_msgs').msg.String;

rclnodejs.init().then(() => {
  const node = rclnodejs.createNode('publisher_example_node');
  const publisher = node.createPublisher(String, 'topic');
  let msg = new String();

  setInterval(function() {
    const str = 'Hello ROS2.0';
    msg.data = str;
    publisher.publish(msg);
  }, 1000);

  rclnodejs.spin(node);
});
```

There are also several useful examples under the `example` folder, which will show you how to use some important features, including `timer/subscription/publisher/client/service`, in `rclnodejs`. You are encouraged to try these examples to understand them.

## API Specification

The API spec is generated by `jsdoc`, you can manually run `npm run docs` to create them by yourself, or just use the existing documents under `docs` folder.

## License

This project abides by [Apache License 2.0](https://github.com/RobotWebTools/rclnodejs/blob/develop/LICENSE).
