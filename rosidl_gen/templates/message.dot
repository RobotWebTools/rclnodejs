// This file is automatically generated by Intel rclnodejs
//
// *** DO NOT EDIT directly
//

'use strict';

const StructType = require('ref-struct');
const ref = require('ref');
const primitiveTypes = require('../rosidl_gen/generator_primitive.js');

{{
var className = it.className;
var generatorName = 'rosidl_generator_c__' + className;
var isString = function(field) {
  return field.type.type === 'string' && !field.type.isArray;
};
}}

const {{=generatorName}} = StructType({
{{~ it.spec.fields :field}}
  {{
    var type;
    if (isString(field)) {
      type = 'primitiveTypes.rosidl_generator_c__String';
    } else {
      type = "ref.types('" + field.type + "')";
    }
  }}
  {{=field.name}}: {{=type}},
{{~}}
});


class {{=className}} {
  constructor() {
    this.__ref_message = new {{=generatorName}}();
  }

{{~ it.spec.fields :field}}
  get {{=field.name}}() {
    return this.__ref_message.{{=field.name}};
  }

  set {{=field.name}}(value) {
  {{? isString(field)}}
    primitiveTypes.rosidl_generator_c__String__assign(this.__ref_message.{{=field.name}}, value);
  {{?? true}}
    this.__ref_message.{{=field.name}} = value;
  {{?}}
  }
{{~}}

}

{{=className}}.getRefBuffer = function(msg) {
  return msg.__ref_message.ref();
};

module.exports = {{=className}};
