// This file is automatically generated by Intel rclnodejs
//
// *** DO NOT EDIT directly
//

'use strict';

const StructType = require('ref-struct');
const ref = require('ref');
const primitiveTypes = require('../rosidl_gen/generator_primitive.js');

{{
var className = it.className;
var generatorName = 'rosidl_generator_nodejs__' + className;

var isString = function(type) {
  return type.type === 'string' && !type.isArray;
};

var calcFileNameFromType = function(type) {
  return type.pkgName + '__msg__' + type.type + '.js';
};

var calcGeneratorTypeNameFromType = function(type) {
  return "rosidl_generator_nodejs__" + type.pkgName + '__msg__' + type.type;
};

}}

const {{=generatorName}} = StructType({
{{~ it.spec.fields :field}}
  {{
    var type;
    if (field.type.isPrimitiveType) {
      type = 'primitiveTypes.' + field.type.type;
    } else {
      type = "require('../generated/" + calcFileNameFromType(field.type) + "').RefType";
    }
  }}
  {{=field.name}}: {{=type}},
{{~}}
});


class {{=className}} {
  constructor() {
    this.__ref_message = new {{=generatorName}}();
  }

{{~ it.spec.fields :field}}
  get {{=field.name}}() {
    return this.__ref_message.{{=field.name}};
  }

  set {{=field.name}}(value) {
  {{? isString(field.type)}}
    primitiveTypes.string__assign(this.__ref_message.{{=field.name}}, value);
  {{?? true}}
    this.__ref_message.{{=field.name}} = value;
  {{?}}
  }
{{~}}

}

{{=className}}.RefType = {{=generatorName}};

{{=className}}.getRefBuffer = function(msg) {
  return msg.__ref_message.ref();
};

module.exports = {{=className}};

/*
 * The following is the original spec object coming from parser:

{{=it.json}}

*/